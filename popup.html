<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <h1>TabStorm</h1>

  <!-- Activity Indicator -->
  <div id="activity-section">
    <div id="activity-indicator" class="activity-idle">
      <span id="activity-icon">✅</span>
      <span id="activity-text">Idle</span>
    </div>
    <div id="batch-info" style="display: none;">
      <span id="pending-count">0</span> tabs queued
      <button id="group-now-btn" class="small-btn">Group Now</button>
    </div>
  </div>

  <!-- Error Section -->
  <div id="error-section" style="display: none;">
    <div class="error-banner">
      <span id="error-icon">⚠️</span>
      <div id="error-content">
        <div id="error-message"></div>
        <div id="error-actions"></div>
      </div>
    </div>
  </div>

  <div class="status">
    <p><strong>Status:</strong> <span id="extensionStatus">Active</span></p>
    <p>Current window has <span id="tabCount">0</span> tabs</p>
    <p>and <span id="groupCount">0</span> groups</p>
  </div>
  
  <button id="refreshBtn">Refresh Stats</button>
  <button id="testBtn">Test Grouping</button>
  <button id="toggleGroupingBtn">Pause Grouping</button>
  
  <div class="control-group">
    <h3>Grouping Settings</h3>
    <label for="groupingMode">Grouping Mode:</label>
    <select id="groupingMode">
      <option value="auto">Automatic (AI-powered)</option>
      <option value="manual">Manual only</option>
      <option value="disabled">Disabled</option>
    </select>
    
    <label for="llmProvider">LLM Provider:</label>
    <select id="llmProvider">
      <option value="openai">OpenAI</option>
      <option value="anthropic">Anthropic (Claude)</option>
      <option value="gemini">Google Gemini</option>
      <option value="zai">Z.ai (GLM)</option>
      <option value="custom">Custom API</option>
    </select>
  </div>
  
  <a href="options.html" class="settings-link" target="_blank">More Settings</a>
  
  <script src="popup.js"></script>
</body>
</html>
